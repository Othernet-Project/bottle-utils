<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Translation support (bottle_utils.i18n) &mdash; Bottle Utils 0.1a1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1a1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Bottle Utils 0.1a1 documentation" href="index.html" />
    <link rel="next" title="Lazy evaluation (bottle_utils.lazy)" href="lazy.html" />
    <link rel="prev" title="HTTP helpers (bottle_utils.http)" href="http.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="lazy.html" title="Lazy evaluation (bottle_utils.lazy)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="http.html" title="HTTP helpers (bottle_utils.http)"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Bottle Utils 0.1a1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="translation-support-bottle-utils-i18n">
<h1>Translation support (<tt class="docutils literal"><span class="pre">bottle_utils.i18n</span></tt>)<a class="headerlink" href="#translation-support-bottle-utils-i18n" title="Permalink to this headline">¶</a></h1>
<div class="section" id="basic-concept">
<h2>Basic concept<a class="headerlink" href="#basic-concept" title="Permalink to this headline">¶</a></h2>
<p>This module provides plugins and functions for translation and language
selection.</p>
<p>Language selection is based on URLs. Each path in the app is augmented with
locale prefix. Therefore, <tt class="docutils literal"><span class="pre">/foo/bar/baz</span></tt> becomes <tt class="docutils literal"><span class="pre">/LOCALE/foo/bar/baz</span></tt>
where locale is any of the locales chosen as translation target.</p>
<p>Translation is performed by calling several of the translation functions
provied by this module. These are simple <tt class="docutils literal"><span class="pre">gettext()</span></tt> and <tt class="docutils literal"><span class="pre">ngettext()</span></tt>
wrappers that are lazily evaluated with the help of
<a class="reference internal" href="lazy.html#bottle_utils.lazy.Lazy" title="bottle_utils.lazy.Lazy"><tt class="xref py py-class docutils literal"><span class="pre">Lazy</span></tt></a> class.</p>
<p>This module doesn&#8217;t deal with message extraction or compilation. For this, you
can use the standard <a class="reference external" href="http://www.gnu.org/software/gettext/">GNU Gettext</a> utilities. You can see examples of scripts
that automate this process in scripts used by <a class="reference external" href="https://github.com/Outernet-Project/librarian/">Librarian</a>, <a class="reference external" href="https://github.com/Outernet-Project/librarian/blob/master/scripts/xmsgs.sh">xmsgs.sh</a> and
<a class="reference external" href="https://github.com/Outernet-Project/librarian/blob/master/scripts/cmpmsgs.sh">compmsgs.sh</a>. Detailed description of what these scripts do is outside the
scope of this documentation. However, it&#8217;s worth noting that allowing Gettext
to treat Bottle&#8217;s SimpleTemplate markup as Python code works fine.</p>
</div>
<div class="section" id="setting-up-the-app-for-translation">
<h2>Setting up the app for translation<a class="headerlink" href="#setting-up-the-app-for-translation" title="Permalink to this headline">¶</a></h2>
<p>To activate translations and language selection, you will need to configure the
plugin and middleware.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The plugin class,
<a class="reference internal" href="#bottle_utils.i18n.I18NPlugin" title="bottle_utils.i18n.I18NPlugin"><tt class="xref py py-class docutils literal"><span class="pre">I18NPlugin</span></tt></a>, is both a Bottle plugin and WSGI
middleware.</p>
</div>
<p>First prepare a list of languages you want to support:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">LANGS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="s">&#39;de_DE&#39;</span><span class="p">,</span> <span class="s">&#39;Deutsch&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;en_US&#39;</span><span class="p">,</span> <span class="s">&#39;English&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;fr_FR&#39;</span><span class="p">,</span> <span class="s">&#39;français&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;es_ES&#39;</span><span class="p">,</span> <span class="s">&#39;español&#39;</span><span class="p">),</span>
    <span class="p">(</span><span class="s">&#39;zh_CN&#39;</span><span class="p">,</span> <span class="s">&#39;中文&#39;</span><span class="p">)</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Also decide which locale you would like to use as default.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">DEFAULT_LOCAL</span> <span class="o">=</span> <span class="s">&#39;en_US&#39;</span>
</pre></div>
</div>
<p>Finally you need to decide where you want to keep the locale directory where
translations are looked up.</p>
<p>The most straightforward way to install the plugin and middleware in one go is
to pass it a bottle application object instead of a pure WSGI app (such as one
returned by other WSGI middleware). There is usually no harm in making this
plugin the first middleware in the stack, so it&#8217;s safe to do so.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">bottle_utils.i18n</span> <span class="kn">import</span> <span class="n">I18NPlugin</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">bottle</span><span class="o">.</span><span class="n">default_app</span><span class="p">()</span>
<span class="n">wsgi_app</span> <span class="o">=</span> <span class="n">I18NPlugin</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">languages</span><span class="o">=</span><span class="n">LANGS</span><span class="p">,</span> <span class="n">default_locale</span><span class="o">=</span><span class="n">DEFAULT_LOCALE</span><span class="p">,</span>
                      <span class="n">locale_dir</span><span class="o">=</span><span class="s">&#39;./locales&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This installs both the Bottle plugin and the WSGI middleware, and returns a
WSGI application object.</p>
</div>
<div class="section" id="translating-in-python-code">
<h2>Translating in Python code<a class="headerlink" href="#translating-in-python-code" title="Permalink to this headline">¶</a></h2>
<p>To translate in Python code, use the <a class="reference internal" href="#bottle_utils.i18n.lazy_gettext" title="bottle_utils.i18n.lazy_gettext"><tt class="xref py py-func docutils literal"><span class="pre">lazy_gettext()</span></tt></a>
and <a class="reference internal" href="#bottle_utils.i18n.lazy_ngettext" title="bottle_utils.i18n.lazy_ngettext"><tt class="xref py py-func docutils literal"><span class="pre">lazy_ngettext()</span></tt></a> functions.</p>
<p><tt class="docutils literal"><span class="pre">lazy_gettext()</span></tt> is usually imported as <tt class="docutils literal"><span class="pre">_</span></tt>, which is a common convention
(alias) for <tt class="docutils literal"><span class="pre">gettext()</span></tt>. <tt class="docutils literal"><span class="pre">lazy_ngettext()</span></tt> should be aliased as simply
<tt class="docutils literal"><span class="pre">ngettext()</span></tt>. Using the lazy versions allows your code to postpone evaluation
of translations until they are actually needed.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">bottle_utils.i18n</span> <span class="kn">import</span> <span class="n">lazy_ngettext</span> <span class="k">as</span> <span class="n">ngettext</span><span class="p">,</span> <span class="n">lazy_gettext</span> <span class="k">as</span> <span class="n">_</span>

<span class="k">def</span> <span class="nf">handler</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">_</span><span class="p">(</span><span class="s">&#39;This is a translatable string&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="translating-in-templates">
<h2>Translating in templates<a class="headerlink" href="#translating-in-templates" title="Permalink to this headline">¶</a></h2>
<p>Translating in SimpleTemplate template code is very similar to translating in
Python code except that all the aliasess have already been set up. Just wrap
the translations in the usual <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">}}</span></tt> tags.:</p>
<div class="highlight-python"><div class="highlight"><pre>&lt;p&gt;{{ _(&#39;Current time&#39;) }}: {{ time }}&lt;/p&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Thanks to this syntactic similarity you can extract messages from templates
using GNU Gettext command line tools and treating templates as normal Python
code.</p>
</div>
</div>
<div class="section" id="module-bottle_utils.i18n">
<span id="functions"></span><h2>Functions<a class="headerlink" href="#module-bottle_utils.i18n" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-bottle_utils.i18n"></span><dl class="class">
<dt id="bottle_utils.i18n.I18NPlugin">
<em class="property">class </em><tt class="descclassname">bottle_utils.i18n.</tt><tt class="descname">I18NPlugin</tt><big>(</big><em>app</em>, <em>langs</em>, <em>default_locale</em>, <em>locale_dir</em>, <em>domain='messages'</em>, <em>noplugin=False</em><big>)</big><a class="reference internal" href="_modules/bottle_utils/i18n.html#I18NPlugin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bottle_utils.i18n.I18NPlugin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bottle plugin and WSGI middleware for handling i18n routes.  This class is
a middleware. However, if the <tt class="docutils literal"><span class="pre">app</span></tt> argument is a <tt class="docutils literal"><span class="pre">Bottle</span></tt> object
(bottle app), it will also install itself as a plugin.  The plugin follows
the <a class="reference external" href="http://bottlepy.org/docs/0.12/plugindev.html">version 2 API</a> and
implements the <tt class="xref py py-meth docutils literal"><span class="pre">apply()</span></tt> method which
applies the plugin to all routes. The plugin and middleware parts were
merged into one class because they depend on each other and can&#8217;t really be
used separately.</p>
<p>During initialization, the class will set up references to locales,
directory paths, and build a mapping between locale names and appropriate
gettext translation APIs. The translation APIs are created using the
<tt class="docutils literal"><span class="pre">gettext.translation()</span></tt> call. This call tries to access matching MO file
in the locale directory, and will emit a warning if such file is not found.
If a MO file does not exist for a given locale, or it is not readable, the
API for that locale will be downgraded to generic <a class="reference external" href="https://docs.python.org/3.4/library/gettext.html">gettext API</a>.</p>
<p>The class will also update the <tt class="docutils literal"><span class="pre">bottle.BaseTemplate.defaults</span></tt> dict with
translation-related methods so they are always available in templates (at
least those that are rendered using bottle&#8217;s API. The following variables
become available in all templates:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">_</span></tt>: alias for <tt class="docutils literal"><span class="pre">lazy_gettext</span></tt></li>
<li><tt class="docutils literal"><span class="pre">gettext</span></tt>: alias for <tt class="docutils literal"><span class="pre">lazy_gettext</span></tt></li>
<li><tt class="docutils literal"><span class="pre">ngettext</span></tt>: alias for <tt class="docutils literal"><span class="pre">lazy_ngettext</span></tt></li>
<li><tt class="docutils literal"><span class="pre">i18n_path</span></tt></li>
<li><tt class="docutils literal"><span class="pre">languages</span></tt>: iterable containing available languages as <tt class="docutils literal"><span class="pre">(locale,</span>
<span class="pre">name)</span></tt> tuples</li>
</ul>
<p>The middleware itself derives the desired locale from the URL. It does not
read cookies or headers. It only looks for the <tt class="docutils literal"><span class="pre">/ll_cc/</span></tt> prefix where
<tt class="docutils literal"><span class="pre">ll</span></tt> is the two-ltter language ID, and <tt class="docutils literal"><span class="pre">cc</span></tt> is country code. If it
finds such a prefix, it will set the locale in the envionment dict
(<tt class="docutils literal"><span class="pre">LOCALE</span></tt> key) and fix the path so it doesn&#8217;t include the prefix. This
allows the bottle app to have routes matching any number of locales. If it
doesn&#8217;t find the prefix, it will redirect to the default locale.</p>
<p>If there is no appropriate locale, and <tt class="docutils literal"><span class="pre">LOCALE</span></tt> key is therfore set to
<tt class="docutils literal"><span class="pre">None</span></tt>, the plugin will automatically respond with a 302 redirect to a
location of the default locale.</p>
<p>The plugin reads the <tt class="docutils literal"><span class="pre">LOCALE</span></tt> key set by the middleware, and aliases the
API for that locale as <tt class="docutils literal"><span class="pre">request.gettext</span></tt>. It also sets <tt class="docutils literal"><span class="pre">request.locale</span></tt>
attribute to the selected locale. These attributes are used by the
<tt class="docutils literal"><span class="pre">lazy_gettext</span></tt> and <tt class="docutils literal"><span class="pre">lazy_ngettext</span></tt>, as well as <tt class="docutils literal"><span class="pre">i18n_path</span></tt> functions.</p>
<p>The plugin installation during initialization can be competely suppressed,
if you wish (e.g., you wish to apply the plugin yourself some other way).</p>
<p>The locale directory should be in a format which <tt class="docutils literal"><span class="pre">gettext.translations()</span></tt>
understands. This is a path that contains a subtree matching this format:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">locale_dir</span><span class="o">/</span><span class="n">LANG</span><span class="o">/</span><span class="n">LC_MESSAGES</span><span class="o">/</span><span class="n">DOMAIN</span><span class="o">.</span><span class="n">mo</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">LANG</span></tt> should match any of the supported languages, and <tt class="docutils literal"><span class="pre">DOMAIN</span></tt>
should match the specified domain.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>app</strong> &#8211; <tt class="docutils literal"><span class="pre">Bottle</span></tt> object</li>
<li><strong>langs</strong> &#8211; iterable containing languages as <tt class="docutils literal"><span class="pre">(locale,</span>
<span class="pre">name)</span></tt> tuples</li>
<li><strong>default_locale</strong> &#8211; default locale</li>
<li><strong>locale_dir</strong> &#8211; directory containing translations</li>
<li><strong>domain</strong> &#8211; the gettext domain</li>
<li><strong>noplugin</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="bottle_utils.i18n.I18NPlugin.app">
<tt class="descname">app</tt><em class="property"> = None</em><a class="headerlink" href="#bottle_utils.i18n.I18NPlugin.app" title="Permalink to this definition">¶</a></dt>
<dd><p>The original bottle application object is accessible as <tt class="docutils literal"><span class="pre">app</span></tt>
attribute after initialization.</p>
</dd></dl>

<dl class="attribute">
<dt id="bottle_utils.i18n.I18NPlugin.default_locale">
<tt class="descname">default_locale</tt><em class="property"> = None</em><a class="headerlink" href="#bottle_utils.i18n.I18NPlugin.default_locale" title="Permalink to this definition">¶</a></dt>
<dd><p>Default locale.</p>
</dd></dl>

<dl class="attribute">
<dt id="bottle_utils.i18n.I18NPlugin.domain">
<tt class="descname">domain</tt><em class="property"> = None</em><a class="headerlink" href="#bottle_utils.i18n.I18NPlugin.domain" title="Permalink to this definition">¶</a></dt>
<dd><p>Domain of the translation.</p>
</dd></dl>

<dl class="attribute">
<dt id="bottle_utils.i18n.I18NPlugin.gettext_apis">
<tt class="descname">gettext_apis</tt><em class="property"> = None</em><a class="headerlink" href="#bottle_utils.i18n.I18NPlugin.gettext_apis" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary that maps locales to <tt class="docutils literal"><span class="pre">gettext.translation()</span></tt> objects
for each locale. Appropriate API object is selected from each</p>
</dd></dl>

<dl class="attribute">
<dt id="bottle_utils.i18n.I18NPlugin.langs">
<tt class="descname">langs</tt><em class="property"> = None</em><a class="headerlink" href="#bottle_utils.i18n.I18NPlugin.langs" title="Permalink to this definition">¶</a></dt>
<dd><p>Supported languages as iterable of <cite>(locale, native_name)</cite> tuples.</p>
</dd></dl>

<dl class="attribute">
<dt id="bottle_utils.i18n.I18NPlugin.locale_dir">
<tt class="descname">locale_dir</tt><em class="property"> = None</em><a class="headerlink" href="#bottle_utils.i18n.I18NPlugin.locale_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Directory that stores <tt class="docutils literal"><span class="pre">.po</span></tt> and <tt class="docutils literal"><span class="pre">.mo</span></tt> files.</p>
</dd></dl>

<dl class="attribute">
<dt id="bottle_utils.i18n.I18NPlugin.locales">
<tt class="descname">locales</tt><em class="property"> = None</em><a class="headerlink" href="#bottle_utils.i18n.I18NPlugin.locales" title="Permalink to this definition">¶</a></dt>
<dd><p>Supported locales (calculated based on <tt class="docutils literal"><span class="pre">langs</span></tt> iterable).</p>
</dd></dl>

<dl class="method">
<dt id="bottle_utils.i18n.I18NPlugin.match_locale">
<tt class="descname">match_locale</tt><big>(</big><em>path</em><big>)</big><a class="reference internal" href="_modules/bottle_utils/i18n.html#I18NPlugin.match_locale"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bottle_utils.i18n.I18NPlugin.match_locale" title="Permalink to this definition">¶</a></dt>
<dd><p>Matches the locale based on prefix in request path. You can customize
this method for a different way of obtaining locale information. Note
that <tt class="docutils literal"><span class="pre">None</span></tt> return value generally means &#8216;use default&#8217;.</p>
<p>The return value of this method is stored in the environment dictionary
as <tt class="docutils literal"><span class="pre">LOCALE</span></tt> key. It is then used by the plugin part of this class to
provide translation methods to the rest of the app.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> &#8211; request path</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">locale or None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="bottle_utils.i18n.I18NPlugin.name">
<tt class="descname">name</tt><em class="property"> = 'i18n'</em><a class="headerlink" href="#bottle_utils.i18n.I18NPlugin.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Bottle plugin name</p>
</dd></dl>

<dl class="staticmethod">
<dt id="bottle_utils.i18n.I18NPlugin.strip_prefix">
<em class="property">static </em><tt class="descname">strip_prefix</tt><big>(</big><em>path</em>, <em>locale</em><big>)</big><a class="reference internal" href="_modules/bottle_utils/i18n.html#I18NPlugin.strip_prefix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bottle_utils.i18n.I18NPlugin.strip_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Strips the locale prefix from the path. This static method is used to
recalculate the request path that should be passed to Bottle. The
return value of this method replaces the <tt class="docutils literal"><span class="pre">PATH_INFO</span></tt> key in the
environment dictionary, and the original path is saved in
<tt class="docutils literal"><span class="pre">ORIGINAL_PATH</span></tt> key.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> &#8211; request path</li>
<li><strong>locale</strong> &#8211; selected locale</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">request path without the locale prefix</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="bottle_utils.i18n.dummy_gettext">
<tt class="descclassname">bottle_utils.i18n.</tt><tt class="descname">dummy_gettext</tt><big>(</big><em>message</em><big>)</big><a class="reference internal" href="_modules/bottle_utils/i18n.html#dummy_gettext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bottle_utils.i18n.dummy_gettext" title="Permalink to this definition">¶</a></dt>
<dd><p>Mimic <tt class="docutils literal"><span class="pre">gettext()</span></tt> function. This is a passthrough function with the same
signature as <tt class="docutils literal"><span class="pre">gettext()</span></tt>. It can be used to simulate translation for
applications that are untranslated, without the overhead of calling the
real <tt class="docutils literal"><span class="pre">gettext()</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message</strong> &#8211; message string</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">unmodified input</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="bottle_utils.i18n.dummy_ngettext">
<tt class="descclassname">bottle_utils.i18n.</tt><tt class="descname">dummy_ngettext</tt><big>(</big><em>singular</em>, <em>plural</em>, <em>n</em><big>)</big><a class="reference internal" href="_modules/bottle_utils/i18n.html#dummy_ngettext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bottle_utils.i18n.dummy_ngettext" title="Permalink to this definition">¶</a></dt>
<dd><p>Mimic <tt class="docutils literal"><span class="pre">ngettext()</span></tt> function. This is a passthrough function with the
same signature as <tt class="docutils literal"><span class="pre">ngettext()</span></tt>. It can be used to simulate translation
for applications that are untranslated, without the overhead of calling the
real <tt class="docutils literal"><span class="pre">ngettext()</span></tt>.</p>
<p>This function returns the verbatim singular message if <tt class="docutils literal"><span class="pre">n</span></tt> is 1,
otherwise the verbatim plural message.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>singular</strong> &#8211; singular message string</li>
<li><strong>plural</strong> &#8211; plural message string</li>
<li><strong>n</strong> &#8211; count</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">unmodified singular or plural message</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="bottle_utils.i18n.full_path">
<tt class="descclassname">bottle_utils.i18n.</tt><tt class="descname">full_path</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/bottle_utils/i18n.html#full_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bottle_utils.i18n.full_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate full path including query string for current request. This is a
helper function used by <a class="reference internal" href="#bottle_utils.i18n.i18n_path" title="bottle_utils.i18n.i18n_path"><tt class="xref py py-func docutils literal"><span class="pre">i18n_path()</span></tt></a>. It uses
the current request context to obtain information about the path.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">path with query string</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="bottle_utils.i18n.i18n_path">
<tt class="descclassname">bottle_utils.i18n.</tt><tt class="descname">i18n_path</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/bottle_utils/i18n.html#i18n_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bottle_utils.i18n.i18n_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return current request path or specified path for given or current locale.
This function can be used to obtain paths for different locales.</p>
<p>If no <tt class="docutils literal"><span class="pre">path</span></tt> argument is passed, the
<a class="reference internal" href="#bottle_utils.i18n.full_path" title="bottle_utils.i18n.full_path"><tt class="xref py py-func docutils literal"><span class="pre">full_path()</span></tt></a> is called to obtain the full path
for current request.</p>
<p>If <tt class="docutils literal"><span class="pre">locale</span></tt> argument is omitted, current locale is used.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> &#8211; request path</li>
<li><strong>locale</strong> &#8211; locale</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">locale-prefixed path</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="bottle_utils.i18n.lazy_gettext">
<tt class="descclassname">bottle_utils.i18n.</tt><tt class="descname">lazy_gettext</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/bottle_utils/i18n.html#lazy_gettext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bottle_utils.i18n.lazy_gettext" title="Permalink to this definition">¶</a></dt>
<dd><p>Lazily evaluated version of <tt class="docutils literal"><span class="pre">gettext()</span></tt>.</p>
<p>This function uses the appropriate Gettext API object based on the value of
<tt class="docutils literal"><span class="pre">bottle.request.gettext</span></tt> set by the plugin. It will fail with
<tt class="docutils literal"><span class="pre">AttributeError</span></tt> exception if the plugin is not installed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message</strong> &#8211; translatable message</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">lazy proxy object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="bottle_utils.i18n.lazy_ngettext">
<tt class="descclassname">bottle_utils.i18n.</tt><tt class="descname">lazy_ngettext</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="_modules/bottle_utils/i18n.html#lazy_ngettext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#bottle_utils.i18n.lazy_ngettext" title="Permalink to this definition">¶</a></dt>
<dd><p>Lazily evaluated version of <tt class="docutils literal"><span class="pre">ngettext()</span></tt>.</p>
<p>This function uses the appropriate Gettext API object based on the value of
<tt class="docutils literal"><span class="pre">bottle.request.gettext</span></tt> set by the plugin. It will fail with
<tt class="docutils literal"><span class="pre">AttributeError</span></tt> exception if the plugin is not installed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>singular</strong> &#8211; translatable singular message</li>
<li><strong>plural</strong> &#8211; translatable plural message</li>
<li><strong>n</strong> &#8211; count</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">lazy proxy object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Translation support (<tt class="docutils literal"><span class="pre">bottle_utils.i18n</span></tt>)</a><ul>
<li><a class="reference internal" href="#basic-concept">Basic concept</a></li>
<li><a class="reference internal" href="#setting-up-the-app-for-translation">Setting up the app for translation</a></li>
<li><a class="reference internal" href="#translating-in-python-code">Translating in Python code</a></li>
<li><a class="reference internal" href="#translating-in-templates">Translating in templates</a></li>
<li><a class="reference internal" href="#module-bottle_utils.i18n">Functions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="http.html"
                        title="previous chapter">HTTP helpers (<tt class="docutils literal"><span class="pre">bottle_utils.http</span></tt>)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="lazy.html"
                        title="next chapter">Lazy evaluation (<tt class="docutils literal"><span class="pre">bottle_utils.lazy</span></tt>)</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/i18n.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="lazy.html" title="Lazy evaluation (bottle_utils.lazy)"
             >next</a> |</li>
        <li class="right" >
          <a href="http.html" title="HTTP helpers (bottle_utils.http)"
             >previous</a> |</li>
        <li><a href="index.html">Bottle Utils 0.1a1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Outernet Inc &lt;hello@outernet.is&gt;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>